<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart - Crave Restaurant</title>
  <link rel="stylesheet" href="src/index.css">
  <link rel="stylesheet" href="src/cart.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playwrite+VN+Guides&display=swap" rel="stylesheet">
  <style>
    /* Cart page specific styles */
    .cart-page-hero {
      background: linear-gradient(135deg, #FFB347 0%, #FF9900 100%);
      color: white;
      padding: 80px 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .cart-page-hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
      opacity: 0.3;
    }

    .cart-page-title {
      font-family: 'Playwrite VN Guides', 'Montserrat', Arial, sans-serif;
      font-size: 4rem;
      font-weight: 700;
      margin: 0 0 20px 0;
      position: relative;
      z-index: 1;
    }

    .cart-page-subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      margin: 0;
      position: relative;
      z-index: 1;
    }

    .cart-page-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 60px 20px;
    }

    .cart-content {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .cart-header-section {
      background: linear-gradient(135deg, #FFB347 0%, #FF9900 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .cart-header-section h2 {
      margin: 0;
      font-size: 1.8rem;
      font-weight: 600;
    }

    .cart-items-section {
      padding: 0;
    }

    .cart-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 25px 30px;
      border-bottom: 1px solid #f1f2f6;
      transition: background-color 0.2s ease;
    }

    .cart-item:hover {
      background-color: #f8f9fa;
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-item-details {
      flex: 1;
    }

    .cart-item-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 5px;
    }

    .cart-item-price {
      font-size: 1.2rem;
      font-weight: 600;
      color: #FF9900;
    }

    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .cart-item-quantity {
      display: flex;
      align-items: center;
      gap: 12px;
      background: #f8f9fa;
      padding: 8px 16px;
      border-radius: 25px;
    }

    .quantity-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      font-weight: 600;
      color: #2c3e50;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
    }

    .quantity-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .quantity-value {
      font-weight: 600;
      min-width: 30px;
      text-align: center;
      color: #2c3e50;
    }

    .remove-item {
      background: none;
      border: none;
      color: #e74c3c;
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
      transition: background-color 0.2s ease;
    }

    .remove-item:hover {
      background-color: #fdf2f2;
    }

    .cart-footer-section {
      background: #f8f9fa;
      padding: 30px;
      border-top: 1px solid #e9ecef;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      font-size: 1.3rem;
      font-weight: 600;
    }

    .cart-total-amount {
      color: #FF9900;
      font-size: 1.5rem;
    }

    .cart-checkout-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #FFB347 0%, #FF9900 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cart-checkout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 153, 0, 0.4);
    }

    .cart-empty {
      padding: 60px 30px;
      text-align: center;
      color: #6c757d;
    }

    .cart-empty svg {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    .cart-empty h3 {
      margin: 0 0 10px 0;
      color: #2c3e50;
    }

    .cart-empty p {
      margin: 0;
      font-size: 1rem;
    }

    .back-to-menu {
      text-align: center;
      margin-top: 30px;
    }

    .back-to-menu a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #FF9900;
      text-decoration: none;
      font-weight: 600;
      padding: 12px 24px;
      border: 2px solid #FF9900;
      border-radius: 25px;
      transition: all 0.3s ease;
    }

    .back-to-menu a:hover {
      background: #FF9900;
      color: white;
    }

    /* Hide the floating cart component */
    .cart-component {
      display: none;
    }

    @media (max-width: 768px) {
      .cart-page-title {
        font-size: 2.5rem;
      }
      
      .cart-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .cart-item-controls {
        width: 100%;
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <div id="navbar-container"></div>

  <div class="cart-page-hero">
    <h1 class="cart-page-title">Your Cart</h1>
    <p class="cart-page-subtitle">Review your delicious selections</p>
  </div>

  <div class="cart-page-container">
    <div class="cart-content" id="cart-content">
      <!-- Cart content will be dynamically generated -->
    </div>
    
    <div class="back-to-menu">
      <a href="menu.html">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Menu
      </a>
    </div>
  </div>

  <script src="src/cart.js"></script>
  <script>
    // Load navbar
    fetch('navbar.html')
      .then(r => r.text())
      .then(html => (document.getElementById('navbar-container').innerHTML = html));

    // Custom cart display for the page
    function updateCartPageDisplay() {
      const cartContent = document.getElementById('cart-content');
      if (!cartContent || !cartManager) return;

      const cart = cartManager.getCart();
      
      if (cart.length === 0) {
        cartContent.innerHTML = `
          <div class="cart-header-section">
            <h2>Your Cart</h2>
          </div>
          <div class="cart-empty">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h3>Your cart is empty</h3>
            <p>Add some delicious items from our menu to get started!</p>
          </div>
        `;
        return;
      }

      const total = cartManager.getCartTotal();
      
      cartContent.innerHTML = `
        <div class="cart-header-section">
          <h2>Your Cart (${cart.length} item${cart.length > 1 ? 's' : ''})</h2>
        </div>
        <div class="cart-items-section">
          ${cart.map(item => {
            const itemName = item.name || 'Unknown Item';
            const itemPrice = parseFloat(item.price) || 0;
            const itemQuantity = parseInt(item.quantity) || 1;
            const totalPrice = (itemPrice * itemQuantity).toFixed(2);
            
            return `
              <div class="cart-item" data-id="${item.id}">
                <div class="cart-item-details">
                  <div class="cart-item-name">${itemName}</div>
                  <div class="cart-item-price">$${totalPrice}</div>
                </div>
                <div class="cart-item-controls">
                  <div class="cart-item-quantity">
                    <button class="quantity-btn" onclick="updateItemQuantity('${item.id}', ${itemQuantity - 1})">-</button>
                    <span class="quantity-value">${itemQuantity}</span>
                    <button class="quantity-btn" onclick="updateItemQuantity('${item.id}', ${itemQuantity + 1})">+</button>
                  </div>
                  <button class="remove-item" onclick="removeCartItem('${item.id}')">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <line x1="18" y1="6" x2="6" y2="18"></line>
                      <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                  </button>
                </div>
              </div>
            `;
          }).join('')}
        </div>
        <div class="cart-footer-section">
          <div class="cart-total">
            <span>Total:</span>
            <span class="cart-total-amount">$${total.toFixed(2)}</span>
          </div>
          <button class="cart-checkout-btn" onclick="proceedToCheckout()">
            Proceed to Checkout
          </button>
        </div>
      `;
    }

    function updateItemQuantity(itemId, newQuantity) {
      if (cartManager) {
        cartManager.updateQuantity(itemId, newQuantity);
        updateCartPageDisplay();
      }
    }

    function removeCartItem(itemId) {
      if (cartManager) {
        cartManager.removeFromCart(itemId);
        updateCartPageDisplay();
      }
    }

    function proceedToCheckout() {
      if (cartManager && cartManager.getCart().length > 0) {
        const total = cartManager.getCartTotal();
        alert(`Proceeding to checkout with total: $${total.toFixed(2)}`);
        // Here you would redirect to checkout page
        // window.location.href = '/checkout.html';
      } else {
        alert('Your cart is empty!');
      }
    }

    // Initialize cart page display
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        if (cartManager) {
          updateCartPageDisplay();
        }
      }, 500);
    });
  </script>
</body>
</html> 